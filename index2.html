<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Level 3</title>

  <link rel="stylesheet" href="styles/intro.css">
  <link rel="stylesheet" href="styles/guidebook.css">
  <link rel="stylesheet" href="styles/mainContent.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

  <script src="scripts/globals.js"></script>
  <script src="scripts/generateTreasures.js"></script>
  <script src="scripts/askQuestion.js"></script>
  <script src="scripts/getTreasureAtMouse.js"></script>  
  <script src="scripts/game.js"></script>
  <script src="scripts/generateObjects.js"></script>
  <script src="scripts/popup.js"></script>
  <script src="scripts/submitCancelAnswer.js"></script>
  <script src="scripts/guidebook.js"></script>

  <style>
    @font-face {
      font-family: 'titleFont';
      src: url('fonts/titleFont.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }
  </style>
</head>
<body>
  <div id="dimmable">
    <div id="mainWrapper">
      <div id="mainContentInner">
      <div id="mainContent">
        <div id="mainTitle">Argand Adventure</div>
        <div id="levelTitle">Level 3: Polar storms</div>
        <div id="levelInfo">You have been swarmed by ice storms. In order to defeat them work out the values of 'r' and 'θ', converting the position of each tornado into polar form.</div>
        <div id="hintInfo">
          Hint: If you are stuck use the Explorer's Guide by pressing 'H' or clicking on the book icon.
        </div>
        </div>
      </div>

        <div id="overlay"></div>

        <div id="questionPopup">
  <button id="closePopupBtn" title="Close" aria-label="Close popup">&times;</button>
  <div id="questionText"></div>

  <div id="treasureCountDisplay" style="font-size: 28px; font-weight: bold; color: #333; text-align: center; margin-top: 12px; display: none;"></div>
  <div id="feedbackMsg" style="color: green; font-weight: bold; min-height: 24px; margin-top: 10px; display: none;"></div>

  <div id="answerSection">
    <div id="polarInputs" style="display:flex; gap:10px; align-items:flex-end;">
      <div class="sqrt-wrapper">
        <input id="rInput" type="text" placeholder="r" style="width: 50px;">
      </div>
      <span class="angle-symbol"></span>
      <input id="thetaInput" type="text" placeholder="θ (to 2dp)" style="width: 70px;">
    </div>

      <div id="feedbackMsg" class="feedback-message"></div>
      <div id="errorMsg" class="error-message"></div>
  <button type="button" id="submitAnswer">Enter</button>
</div>
</div>

      <button id="openGuidebookBtn" aria-label="Open Explorer's Guide">
        <img src="https://cdn-icons-png.flaticon.com/128/207/207114.png" id="bookIcon" alt="Book Icon">
      </button>

      <div id="guidebookSidebar" aria-hidden="true" tabindex="-1" role="region" aria-label="Explorer's Guide">
        <button id="closeGuidebookBtn" aria-label="Close Guidebook">&times;</button>
      
  <div id="guidebookContent">
    <h2>Explorer's Guide</h2>
    <div id="level0Tab" class="guidebookTab" data-unlock-level="0">
      <p>Welcome to the Argand Adventure guidebook!</p>
          <p>Here you will find information about complex numbers and how they interact along the Argand plane.
             As you progress through the levels, you will discover more pages of the book.
          </p>
          <h3>What are Complex Numbers?</h3>
          <p>A complex number is a number that has <strong>two parts</strong>: a real part and an imaginary part. It’s written like this:</p>
          <p style="text-align: center;"><strong>a + bi</strong></p>
            <p><strong>a</strong> is the real part (numbers on the horizontal axis)</p>
            <p><strong>b</strong> is the imaginary part (numbers on the vertical axis)</p>
            <p><strong>i</strong> is the imaginary unit, defined by <em>i² = -1</em></p>
          <p>Example: <strong>3 + 4i</strong> → Real part = 3, Imaginary part = 4</p>

          <h3>Tip for Adventurers</h3>
          <p>Think of the <strong>real part</strong> as moving left/right and the <strong>imaginary part</strong> as moving up/down on the Argand Plane. Each step in your adventure is like moving along a complex number!</p>
    </div>

        <div id="level1Tab" class="guidebookTab" data-unlock-level="1" style="display:none;">
      <p>To collect key fragments you must solve addition and subtraction puzzles with complex numbers.</p>
        <h3>Adding Complex Numbers</h3>
        <p>To add two complex numbers, add their <strong>real parts</strong> and their <strong>imaginary parts</strong> separately:</p>
        <p style="text-align:center;"><strong>(a + bi) + (c + di) = (a+c) + (b+d)i</strong></p>
        <p><strong>Example:</strong> (3 + 4i) + (2 + 5i) = (3+2) + (4+5)i = 5 + 9i</p>
        
        <h3>Subtracting Complex Numbers</h3>
        <p>To subtract, subtract the real parts and the imaginary parts:</p>
        <p style="text-align:center;"><strong>(a + bi) - (c + di) = (a-c) + (b-d)i</strong></p>
        <p><strong>Example:</strong> (6 + 7i) - (2 + 3i) = (6-2) + (7-3)i = 4 + 4i</p>
    </div>

    <div id="level2Tab" class="guidebookTab" data-unlock-level="2" style="display:none;">
      <h3>Understanding Polar Form</h3>
      <p>Any complex number <strong>z = a + bi</strong> can be represented in polar form as:</p>
      <p style="text-align:center;"><strong>z = r (cos θ + i sin θ) = re<sup>iθ</sup></strong></p>
      <ul>
        <li><strong>r</strong> is the <em>magnitude</em> (distance from the origin)</li>
        <li><strong>θ</strong> is the <em>argument</em> (angle from the positive real axis)</li>
      </ul>

      <h3>Step 1: Finding r</h3>
      <p>The magnitude is found using the Pythagorean theorem:</p>
      <p style="text-align:center;"><strong>r = √(a² + b²)</strong></p>
      <p><strong>Example:</strong> For z = 3 + 4i, r = √(3² + 4²) = √(9 + 16) = 5</p>

      <h3>Step 2: Finding θ</h3>
      <p>The angle is found using the arctangent of the imaginary part divided by the real part:</p>
      <p style="text-align:center;"><strong>θ = arctan(b / a)</strong></p>
      <p><strong>Example:</strong> For z = 3 + 4i, θ = arctan(4 / 3) ≈ 0.927 radians (≈ 53.13°)</p>
      <p>Be careful with the quadrant: if <strong>a</strong> is negative, add π to θ to get the correct direction.</p>

      <h3>Step 3: Writing the Polar Form</h3>
      <p>Once you have r and θ, you can write:</p>
      <p style="text-align:center;"><strong>z = 5 (cos 0.927 + i sin 0.927) = 5 e<sup>i0.927</sup></strong></p>
    </div>

  </div>
  
  <div id="guidebookNav">
          <button class="guidebookTabBtn" data-target-tab="level0Tab" data-unlock-level="0">Introduction</button>
          <button class="guidebookTabBtn" data-target-tab="level1Tab" data-unlock-level="1">Addition & Subtraction</button>
          <button class="guidebookTabBtn" data-target-tab="level2Tab" data-unlock-level="2">Polar Form</button>
        </div>
</div>
</div>
</div>

  <div id="introPopup">
    <div id="introContent">
      <p>After entering the wizard's tower a snow spell was cast upon you.
        You must defeat the ice tornadoes to prove yourself to the wizard.</p>
      <button id="closeIntroBtn">Continue</button>
    </div>
  </div>

  <div id="introPopup2">
    <div id="introContent2">
      <p>Convert complex numbers into their polar form by calculating an 'r' and 'θ' value for each location of an ice storm.</p>
      <p></p>
      <button id="closeIntroBtn2">Begin</button>
    </div>
  </div>

<div id="levelCompletePopup" style="display:none;">
  <div id="levelCompleteContent">
    <h2>Congratulations</h2>
    <p>You have defeated the ice tornados and unlocked a clue</p>
    <button id="continueBtn">Continue</button>
  </div>
</div>
</body>
</html>
